(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&h(m)}).observe(document,{childList:!0,subtree:!0});function f(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function h(o){if(o.ep)return;o.ep=!0;const u=f(o);fetch(o.href,u)}})();var B={},_;function U(){return _||(_=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.countMap=i.Random=i.phi=i.radiansPerDegree=i.degreesPerRadian=i.FULL_CIRCLE=i.FIGURE_SPACE=i.NON_BREAKING_SPACE=i.MIN_DATE=i.MAX_DATE=i.csvStringToArray=void 0,i.assertClass=a,i.sleep=f,i.testXml=h,i.parseXml=o,i.followPath=u,i.getAttribute=m,i.parseFloatX=L,i.parseIntX=v,i.parseTimeT=c,i.pickAny=d,i.pick=n,i.take=g,i.filterMap=A,i.makePromise=y,i.dateIsValid=H,i.angleBetween=X,i.positiveModulo=C,i.rotateArray=D,i.rectUnion=k,i.rectAddPoint=$,i.dateToFileName=j,i.lerp=z,i.assertFinite=V,i.shuffleArray=q,i.zip=K,i.count=W,i.initializedArray=I,i.sum=Z,i.makeLinear=Y,i.makeBoundedLinear=J,i.polarToRectangular=Q,i.permutations=F;function a(t,e,s="Assertion Failed."){const r=p=>{throw new Error(`${s}  Expected type:  ${e.name}.  Found type:  ${p}.`)};if(t===null)r("null");else if(typeof t!="object")r(typeof t);else if(!(t instanceof e))r(t.constructor.name);else return t;throw new Error("wtf")}function f(t){return new Promise(e=>{setTimeout(e,t)})}function h(t){const s=new DOMParser().parseFromString(t,"application/xml");for(const r of Array.from(s.querySelectorAll("parsererror")))if(r instanceof HTMLElement)return{error:r};return{parsed:s}}function o(t){if(t!==void 0)return h(t)?.parsed?.documentElement}function u(t,...e){for(const s of e){if(t===void 0)return;if(typeof s=="number")t=t.children[s];else{const r=t.getElementsByTagName(s);if(r.length!=1)return;t=r[0]}}return t}function m(t,e,...s){if(e=u(e,...s),e!==void 0&&e.hasAttribute(t))return e.getAttribute(t)??void 0}function L(t){if(t==null)return;const e=+t;if(isFinite(e))return e}function v(t){const e=L(t);if(e!==void 0)return e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||e!=Math.floor(e)?void 0:e}function c(t){if(typeof t=="string"&&(t=v(t)),t!=null&&!(t<=0))return new Date(t*1e3)}const l=t=>{const e=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,s=[[]];let r;for(;r=e.exec(t);)r[1].length&&r[1]!==","&&s.push([]),s[s.length-1].push(r[2]!==void 0?r[2].replace(/""/g,'"'):r[3]);return s};i.csvStringToArray=l;function d(t){const e=t.values().next();if(!e.done)return e.value}function n(t){if(t.length==0)throw new Error("wtf");return t[Math.random()*t.length|0]}function g(t){if(t.length<1)throw new Error("wtf");const e=Math.random()*t.length|0;return t.splice(e,1)[0]}function A(t,e){const s=[];return t.forEach((r,p)=>{const E=e(r,p);E!==void 0&&s.push(E)}),s}function y(){let t,e;return{promise:new Promise((r,p)=>{t=r,e=p}),resolve:t,reject:e}}i.MAX_DATE=new Date(864e13),i.MIN_DATE=new Date(-864e13);function H(t){return isFinite(t.getTime())}i.NON_BREAKING_SPACE=" ",i.FIGURE_SPACE=" ",i.FULL_CIRCLE=2*Math.PI,i.degreesPerRadian=360/i.FULL_CIRCLE,i.radiansPerDegree=i.FULL_CIRCLE/360,i.phi=(1+Math.sqrt(5))/2;function X(t,e){const s=C(t,i.FULL_CIRCLE);let p=C(e,i.FULL_CIRCLE)-s;const E=i.FULL_CIRCLE/2;if(p>E?p-=i.FULL_CIRCLE:p<-E&&(p+=i.FULL_CIRCLE),Math.abs(p)>E)throw new Error("wtf");return p}function C(t,e){const s=t%e;return s<0?s+Math.abs(e):s}function D(t,e){if((e|0)!=e)throw new Error(`invalid input: ${e}`);return e=C(e,t.length),e==0?t:[...t.slice(e),...t.slice(0,e)]}class G{static sfc32(e,s,r,p){return function(){e|=0,s|=0,r|=0,p|=0;let E=(e+s|0)+p|0;return p=p+1|0,e=s^s>>>9,s=r+(r<<3)|0,r=r<<21|r>>>11,r=r+E|0,(E>>>0)/4294967296}}static#n=42;static create(e=this.newSeed()){console.info(e);const s=JSON.parse(e);if(!(s instanceof Array))throw new Error("invalid seed");if(s.length!=4)throw new Error("invalid seed");const[r,p,E,S]=s;if(!(typeof r=="number"&&typeof p=="number"&&typeof E=="number"&&typeof S=="number"))throw new Error("invalid seed");return this.sfc32(r,p,E,S)}static newSeed(){const e=[];return e.push(Date.now()),e.push(this.#n++),e.push(Math.random()*2**31|0),e.push(Math.random()*2**31|0),JSON.stringify(e)}}i.Random=G;function k(t,e){const s=Math.min(t.x,e.x),r=Math.min(t.y,e.y),p=Math.max(t.x+t.width,e.x+e.width),E=Math.max(t.y+t.height,e.y+e.height),S=p-s,tt=E-r;return{x:s,y:r,width:S,height:tt}}function $(t,e,s){return k(t,{x:e,y:s,width:0,height:0})}function j(t){return isNaN(t.getTime())?"0000⸱00⸱00 00⦂00⦂00":`${t.getFullYear().toString().padStart(4,"0")}⸱${(t.getMonth()+1).toString().padStart(2,"0")}⸱${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}⦂${t.getMinutes().toString().padStart(2,"0")}⦂${t.getSeconds().toString().padStart(2,"0")}`}function z(t,e,s){return t+(e-t)*s}function V(...t){t.forEach(e=>{if(!isFinite(e))throw new Error("wtf")})}function q(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}function*K(...t){const e=t.map(s=>s[Symbol.iterator]());for(;;){const s=e.map(r=>r.next());if(s.some(({done:r})=>r))break;yield s.map(({value:r})=>r)}}function*W(t=0,e=1/0,s=1){for(let r=t;r<e;r+=s)yield r}function I(t,e){const s=[];for(let r=0;r<t;r++)s.push(e(r));return s}i.countMap=I;function Z(t){return t.reduce((e,s)=>e+s,0)}function Y(t,e,s,r){const p=(r-e)/(s-t);return function(E){return(E-t)*p+e}}function J(t,e,s,r){s<t&&([t,e,s,r]=[s,r,t,e]);const p=(r-e)/(s-t);return function(E){return E<=t?e:E>=s?r:(E-t)*p+e}}function Q(t,e){return{x:Math.cos(e)*t,y:Math.sin(e)*t}}function*F(t,e=[]){if(t.length==0)yield e;else for(let s=0;s<t.length;s++){const r=t[s],p=[...e,r],E=[...t.slice(0,s),...t.slice(s+1)];yield*F(E,p)}}}(B)),B}var w=U(),N={},P;function et(){if(P)return N;P=1,Object.defineProperty(N,"__esModule",{value:!0}),N.AnimationLoop=void 0,N.getById=a,N.loadDateTimeLocal=f,N.getBlobFromCanvas=h,N.getAudioBalanceControl=o,N.getHashInfo=u,N.createElementFromHTML=m,N.download=L;const i=U();function a(c,l){const d=document.getElementById(c);if(!d)throw new Error("Could not find element with id "+c+".  Expected type:  "+l.name);if(d instanceof l)return d;throw new Error("Element with id "+c+" has type "+d.constructor.name+".  Expected type:  "+l.name)}function f(c,l,d="milliseconds"){let n;switch(d){case"minutes":{n=l.getSeconds()*1e3+l.getMilliseconds();break}case"seconds":{n=l.getMilliseconds();break}case"milliseconds":{n=0;break}default:throw new Error("wtf")}c.valueAsNumber=+l-l.getTimezoneOffset()*6e4-n}function h(c){const{reject:l,resolve:d,promise:n}=(0,i.makePromise)();return c.toBlob(g=>{g?d(g):l(new Error("blob is null!"))}),n}function o(c){const l=new AudioContext,d=l.createMediaElementSource(c),n=new StereoPannerNode(l,{pan:0});return d.connect(n).connect(l.destination),g=>{n.pan.value=g}}function u(){const c=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(n=>{const g=n.split("=",2);if(g.length==2){const A=decodeURIComponent(g[0]),y=decodeURIComponent(g[1]);c.set(A,y)}}),c}function m(c,l){var d=document.createElement("div");return d.innerHTML=c.trim(),(0,i.assertClass)(d.firstChild,l,"createElementFromHTML:")}function L(c,l){var d=document.createElement("a");if(d.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(l)),d.setAttribute("download",c),document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),d.dispatchEvent(n)}else d.click()}class v{onWake;constructor(l){this.onWake=l,this.callback=this.callback.bind(this),requestAnimationFrame(this.callback)}#n=!1;cancel(){this.#n=!0}callback(l){this.#n||(requestAnimationFrame(this.callback),this.onWake(l))}}return N.AnimationLoop=v,N}var nt=et();function M(i,a){const f=i.childNodes.length;i.insertAdjacentHTML("beforeend",a);const h=i.childNodes,o=new Array,u=i.childNodes.length;for(let m=f;m<u;m++)o.push(h[m]);return o}function R(i,a,f){const h=M(i,a);if(h.length!=1)throw new Error("wtf");return w.assertClass(h[0],f)}function O(i,a,f,h){const o=M(i,a);if(o.length!=2)throw new Error("wtf");return[w.assertClass(o[0],f),w.assertClass(o[1],h)]}class b{static#n=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));static toBinary(a){const h="",u=b.#n;return u.setFloat64(0,a,!1),w.initializedArray(Float64Array.BYTES_PER_ELEMENT,L=>u.getUint8(L).toString(2).padStart(8,"0")).join(h)}static bitsAreValid(a){return/^[01]{64}$/.test(a)}static fromBinary(a){if(!this.bitsAreValid(a))return;const f=b.#n;for(let u=0;u<8;u++){const m=a.substring(u*8,(u+1)*8),L=parseInt(m,2);f.setUint8(u,L)}return f.getFloat64(0,!1)}static toFloat(a){return this.#n.setFloat32(0,a),this.#n.getFloat32(0)}#o;#l;#i=document.createElement("div");#c(a){const f=document.createElement("span"),h=()=>{const o=[...this.bits],m=o[a]=="0"?"1":"0";o[a]=m,this.bits=o.join("")};return f.addEventListener("pointerdown",h),f.addEventListener("keypress",o=>{(o.key==" "||o.key=="Enter")&&(h(),o.stopPropagation())}),f.style.cursor="pointer",f.dataset.digit=a.toString(),f.tabIndex=0,f}#d=w.initializedArray(64,a=>this.#c(a));#u=document.createElement("span");#h=document.createElement("span");#t=document.createElement("div");#p=w.initializedArray(52,a=>this.#c(a+12));#r=document.createElement("span");#s=[this.#r,...this.#p];#m=this.#c(0);#e=document.createElement("span");#a=document.createElement("input");get inputElement(){return this.#a}get exponentBits(){return this.bits.substring(1,12)}set exponentBits(a){if(!/^[01]{11}$/.test(a))throw new Error("wtf");const f=[...this.bits].toSpliced(1,a.length,...a).join("");if(this.bits=f,this.exponentBits!=a)throw new Error("wtf")}static EXPONENT_COUNT=2048;get exponent(){const a=parseInt(this.exponentBits,2);if(!(Number.isSafeInteger(a)&&a>=0&&a<b.EXPONENT_COUNT))throw new Error("wtf");return a}set exponent(a){if(!Number.isSafeInteger(a))throw new Error("wtf");a=w.positiveModulo(a,b.EXPONENT_COUNT),this.exponentBits=a.toString(2).padStart(11,"0")}get inputValue(){return w.parseFloatX(this.#a.value)??NaN}constructor(a=0){this.#o=a,this.#l=b.toBinary(a),this.#e.classList.add("exponent"),this.#e.dataset.digit="x",this.#e.innerText=".";const f=n=>{const{left:g,width:A}=this.#e.getBoundingClientRect();return n.clientX<g+A/2},h=n=>{this.#e.style.cursor=f(n)?"w-resize":"e-resize"};this.#e.addEventListener("mouseenter",h),this.#e.addEventListener("mouseleave",h),this.#e.addEventListener("mousemove",h),this.#e.addEventListener("click",n=>{f(n)?this.exponent--:this.exponent++}),this.#t.style.wordBreak="break-all",this.#r.classList.add("exponent"),this.#r.dataset.digit="x";const o=document.createElement("div");o.style.wordBreak="break-all",o.append(...this.#d);const u=document.createElement("div");u.append("Value:"+w.NON_BREAKING_SPACE+w.NON_BREAKING_SPACE,this.#u);const m=document.createElement("div");m.classList.add("exponent"),m.style.display="flex",m.append("Exponent:"+w.NON_BREAKING_SPACE+w.NON_BREAKING_SPACE,this.#h);const[,L]=O(m,w.NON_BREAKING_SPACE+"<button>+1</button>",Text,HTMLButtonElement),[,v]=O(m,w.NON_BREAKING_SPACE+"<button>-1</button>",Text,HTMLButtonElement);L.addEventListener("click",()=>this.exponent++),v.addEventListener("click",()=>this.exponent--);const c=document.createElement("div");{let n=document.createElement("button");n.innerText="=",n.addEventListener("click",()=>{this.value=this.inputValue}),c.append(n," "),n=document.createElement("button"),n.innerText="+=",n.addEventListener("click",()=>{this.value+=this.inputValue}),c.append(n," "),n=document.createElement("button"),n.innerText="-=",n.addEventListener("click",()=>{this.value-=this.inputValue}),c.append(n," "),n=document.createElement("button"),n.innerText="*=",n.addEventListener("click",()=>{this.value*=this.inputValue}),c.append(n," "),n=document.createElement("button"),n.innerText="/=",n.addEventListener("click",()=>{this.value/=this.inputValue}),c.append(n," "),n=document.createElement("button"),n.innerText="%=",n.addEventListener("click",()=>{this.value%=this.inputValue}),c.append(n," "),n=document.createElement("button"),n.innerText="^=",n.addEventListener("click",()=>{this.value^=this.inputValue}),c.append(n," "),n=document.createElement("button"),n.innerText="&=",n.addEventListener("click",()=>{this.value&=this.inputValue}),c.append(n," "),n=document.createElement("button"),n.innerText="|=",n.addEventListener("click",()=>{this.value|=this.inputValue}),c.append(n," ")}c.appendChild(this.#a),this.#a.value="2";const l=document.createElement("div");{let n=document.createElement("button");n.innerText="NaN",n.addEventListener("click",()=>this.value=NaN),l.append("= ",n),n=document.createElement("button"),n.innerText="-Infinity",n.addEventListener("click",()=>this.value=-1/0),l.append(" ",n),n=document.createElement("button"),n.innerText="Min Safe Integer",n.addEventListener("click",()=>this.value=Number.MIN_SAFE_INTEGER),l.append(" ",n),n=document.createElement("button"),n.innerText="Min Value",n.addEventListener("click",()=>this.value=Number.MIN_VALUE),l.append(" ",n),n=document.createElement("button"),n.innerText="Epsilon",n.addEventListener("click",()=>this.value=Number.EPSILON),l.append(" ",n),n=document.createElement("button"),n.innerText="Max Safe Integer",n.addEventListener("click",()=>this.value=Number.MAX_SAFE_INTEGER),l.append(" ",n),n=document.createElement("button"),n.innerText="Max Value",n.addEventListener("click",()=>this.value=Number.MAX_VALUE),l.append(" ",n),n=document.createElement("button"),n.innerText="Infinity",n.addEventListener("click",()=>this.value=1/0),l.append(" ",n)}const d=document.createElement("div");d.style.display="flex",d.style.gap="0.25em",d.style.padding="0.25em 0",R(d,"<button>1/x</button>",HTMLButtonElement).addEventListener("click",()=>this.value=1/this.value),R(d,"<button>32 Bits</button>",HTMLButtonElement).addEventListener("click",()=>{this.value=b.toFloat(this.value)}),this.#i.appendChild(u),this.#i.appendChild(o),this.#i.appendChild(m),this.#i.appendChild(this.#t),this.#i.appendChild(c),this.#i.appendChild(l),this.#i.appendChild(d),this.#i.classList.add("top"),this.#f()}#f(){for(const[o,u]of w.zip(this.bits,this.#d))u.innerText=o;function a(o){return o.toString()}if(this.#u.innerText=a(this.value),this.exponentBits.length!=11)throw new Error("wtf");const h=this.exponent;this.#h.innerText=h.toLocaleString();{const o=this.bits.substring(12);if(o.length!=52)throw new Error("wtf");this.#t.innerText="";const u=1023,m=1075;if(h==b.EXPONENT_COUNT-1)this.#t.innerText="Infinity or NaN";else if(this.#t.appendChild(this.#m).innerText=this.bits[0]=="0"?"+":"-",h==0){const L="0"+o;this.#r.innerText="0",M(this.#t,'<span data-digit="x">0</span>'),this.#t.appendChild(this.#e),M(this.#t,'<span data-digit="x">0…0</span>'),this.#s.forEach((v,c)=>{const l=L[c];this.#t.appendChild(v).innerText=l,v.style.fontWeight=""})}else{const L="1"+o;if(this.#r.innerText="1",h>m){const v=h-m;this.#s.forEach((l,d)=>{const n=L[d];this.#t.appendChild(l).innerText=n,l.style.fontWeight=""});const c=v>3?"0…0":"0".repeat(v);M(this.#t,`<span data-digit="x">${c}</span>`),this.#t.appendChild(this.#e)}else if(h>=u){const v=h-u;let c=NaN;this.#s.forEach((l,d)=>{const n=L[d];this.#t.appendChild(l).innerText=n,n=="1"&&(c=d),d==v&&(this.#t.appendChild(this.#e),c=d)}),w.assertFinite(c),this.#s.forEach((l,d)=>{const g=d>c?"100":"";l.style.fontWeight=g})}else{const v=u-h;M(this.#t,'<span data-digit="x">0</span>'),this.#t.appendChild(this.#e);const c=v>3?"0…0":"0".repeat(v-1);M(this.#t,`<span data-digit="x">${c}</span>`);let l=NaN;this.#s.forEach((d,n)=>{const g=L[n];this.#t.appendChild(d).innerText=g,g=="1"&&(l=n),d.style.fontWeight=""}),w.assertFinite(l),this.#s.forEach((d,n)=>{const A=n>l?"100":"";d.style.fontWeight=A})}}}}get value(){return this.#o}set value(a){this.#o=a,this.#l=b.toBinary(a),this.#f(),this.valueChanged?.()}valueChanged;get bits(){return this.#l}set bits(a){const f=b.fromBinary(a);if(f===void 0)throw new Error("invalid");this.value=f,a!=this.bits&&console.info(a,this.bits)}get top(){return this.#i}}window.DoubleViewer=b;const T=new b(3.5);nt.getById("main",HTMLHeadingElement).insertAdjacentElement("afterend",T.top);const it=new Set("+-.1234567890");window.addEventListener("keypress",i=>{it.has(i.key)&&document.activeElement!=T.inputElement&&(T.inputElement.focus(),T.inputElement.select())});T.inputElement.addEventListener("keypress",i=>{i.key=="Enter"&&(T.value=T.inputValue)});T.valueChanged=()=>{location.hash=T.bits};function x(){const i=location.hash.substring(1);b.bitsAreValid(i)&&T.bits!=i&&(T.bits=i)}x();addEventListener("hashchange",x);
